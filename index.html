<!doctype html>
<head>
    <meta charset="utf-8">
    <title>abcdefg</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="/layui/css/layui.css" rel="stylesheet"/>
    <link href="/css/base.css" rel="stylesheet"/>
</head>
<body>
<div class="a1">
	<div class="b1">
		<ul class="d1">
			<li>
				<span>-></span>
				<a href="category">博客分类</a>
			</li>
			<li>
				<span>-></span>
				<a href="times">时间轴</a>
			</li>
			<li>
				<span>-></span>
				<a href="tags">标签列表</a>
			</li>
			<li>
				<span>-></span>
				<a href="/login">管理员登陆</a>
			</li>
			<li>
				<span>-></span>
				<a href="console">控制台 : #(session.user.name)</a>
			</li>
			<li>
				<span>-></span>
				<a href="/temp/logout">登出</a>
			</li>
		</ul>
	</div>
</div>

<script src="/layui/layui.js"></script>
<script>
    layui.use(['httputil', 'jsencrypt'], function(){
		let encrypt = layui.jsencrypt;
		let httputil = layui.httputil;

        login("ggboy","123");

		async function login(loginNumber, pwd) {
            try {
            	var result = await httputil.get("/rsa/publicKey");
            	encrypt.setPublicKey(result.data.data);
            	pwd = encrypt.encrypt(pwd);
                await httputil.post("/user/login", {loginNumber:loginNumber,password:pwd});
                console.log("登陆成功");
			} catch (e) {
            	console.log(e.response);
            }
		}
    });
</script>
</body>
</html>